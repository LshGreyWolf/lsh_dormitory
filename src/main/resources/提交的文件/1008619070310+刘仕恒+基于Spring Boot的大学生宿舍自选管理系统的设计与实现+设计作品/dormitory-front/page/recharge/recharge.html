<div class="layuimini-container layuimini-page-anim">
    <div class="layuimini-main">
        <div class="layui-fluid">
            <div class="layui-card">
                <div class="layui-card-body" style="padding-top: 40px;">
                    <div class="layui-carousel" id="stepForm" lay-filter="stepForm" style="margin: 0 auto;">
                        <div carousel-item>
                            <div>
                                <form class="layui-form" style="margin: 0 auto;max-width: 460px;padding-top: 40px;">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label required">学号:</label>
                                        <div class="layui-input-block">
                                            <input type="text" placeholder="请填写学号" name="stuNo"
                                                   class="layui-input" lay-reqtext="学号不能为空"
                                                   lay-verify="required"/>

                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label required">充值卡号:</label>
                                        <div class="layui-input-block">
                                            <input type="text" placeholder="请填写充值卡号" name="accountCard"
                                                   class="layui-input" lay-reqtext="充值卡号不能为空"
                                                   lay-verify="required"/>

                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">充值金额:</label>
                                        <div class="layui-input-block">
                                            <input type="number" placeholder="请填写充值金额" name="balance" value=""
                                                   class="layui-input" lay-verify="number" required>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">充值类型:</label>
                                        <div class="layui-input-block">
                                            <!--                                            <select lay-verify="required" name="accountType">-->
                                            <!--                                                <option value="1" selected >洗澡卡</option>-->
                                            <!--                                                <option value="2" >水卡</option>-->
                                            <!--                                            </select>-->
                                            <input type="radio" name="accountType" value="1" title="洗澡卡" checked="">
                                            <input type="radio" name="accountType" value="2" title="水卡">
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">入款方式:</label>
                                        <div class="layui-input-block">
                                            <!--                                            <select lay-verify="required" name="accountWay">-->
                                            <!--                                                <option value="1" selected  >微信</option>-->
                                            <!--                                                <option value="2"  >支付宝</option>-->
                                            <!--                                                <option value="3"  >现金</option>-->
                                            <!--                                            </select>-->
                                            <input type="radio" name="accountWay" value="1" title="微信" checked="">
                                            <input type="radio" name="accountWay" value="2" title="支付宝">
                                            <input type="radio" name="accountWay" value="3" title="现金">
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">备注说明:</label>
                                        <div class="layui-input-block">
                                            <textarea placeholder="充值备注" value="" class="layui-textarea"
                                                      name="remark"></textarea>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <div class="layui-input-block">
                                            <button class="layui-btn" lay-submit lay-filter="formStep">
                                                &emsp;下一步&emsp;
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div>
                                <form class="layui-form" style="margin: 0 auto;max-width: 460px;padding-top: 40px;">
                                    <div class="layui-form-item">
                                        <label class="layui-form-label" name="stuNo">学号:</label>
                                        <div class="layui-input-block" name="stuNo">
                                            <div class="layui-form-mid layui-word-aux" id="stuNo" name="stuNo"></div>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">充值卡号:</label>
                                        <div class="layui-input-block">
                                            <div class="layui-form-mid layui-word-aux" id="accountCard"></div>
                                        </div>
                                    </div>
                                    <!--                                    <div class="layui-form-item">-->
                                    <!--                                        <label class="layui-form-label">账户余额:</label>-->
                                    <!--                                        <div class="layui-input-block">-->
                                    <!--                                            <div class="layui-form-mid layui-word-aux">3000 元（保险箱：1000，现金：2000）-->
                                    <!--                                            </div>-->
                                    <!--                                        </div>-->
                                    <!--                                    </div>-->
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">充值金额:</label>
                                        <div class="layui-input-block">
                                            <div class="layui-form-mid layui-word-aux">
                                                <span style="font-size: 18px;color: #333;" id="balance"> 元</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">充值类型:</label>
                                        <div class="layui-input-block">
                                            <div class="layui-form-mid layui-word-aux" id="accountType"></div>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">充值方式:</label>
                                        <div class="layui-input-block">
                                            <div class="layui-form-mid layui-word-aux" id="accountWay"></div>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <label class="layui-form-label">备注说明:</label>
                                        <div class="layui-input-block">
                                            <div class="layui-form-mid layui-word-aux" id="remark"></div>
                                        </div>
                                    </div>
                                    <div class="layui-form-item">
                                        <div class="layui-input-block">
                                            <button type="button" class="layui-btn layui-btn-primary pre">上一步
                                            </button>
                                            <button class="layui-btn" lay-submit lay-filter="formStep2">
                                                &emsp;确认充值&emsp;
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div>
                                <div style="text-align: center;margin-top: 90px;">
                                    <i class="layui-icon layui-circle"
                                       style="color: white;font-size:30px;font-weight:bold;background: #52C41A;padding: 20px;line-height: 80px;">&#xe605;</i>
                                    <div style="font-size: 24px;color: #333;font-weight: 500;margin-top: 30px;">
                                        充值成功
                                    </div>
                                    <div style="font-size: 14px;color: #666;margin-top: 20px;">充值愉快</div>
                                </div>
                                <div style="text-align: center;margin-top: 50px;">
                                    <button class="layui-btn next">继续充值</button>
                                    <!--                  <button class="layui-btn layui-btn-primary">查看账单</button>-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div style="color: #666;margin-top: 30px;margin-bottom: 40px;padding-left: 30px;">

                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<script>

    layui.use(['form', 'step', 'axios', 'miniAdmin', 'jquery'], function () {
        var $ = layui.$,
            form = layui.form,
            axios = layui.axios,
            jquery = layui.jquery,
            miniAdmin = layui.miniAdmin,
            step = layui.step;

        /**
         * 初始化表单，要加上，不然刷新部分组件可能会不加载
         */
        form.render();

        step.render({
            elem: '#stepForm',
            filter: 'stepForm',
            width: '100%', //设置容器宽度
            stepWidth: '750px',
            height: '500px',
            stepItems: [{
                title: '填写充值卡号'
            }, {
                title: '确认充值信息'
            }, {
                title: '完成'
            }]
        });


        form.on('submit(formStep)', function (data) {
            step.next('#stepForm');
            $("#stuNo").text(data.field.stuNo)
            $("#accountCard").text(data.field.accountCard)
            $("#balance").text(data.field.balance + '元')
            if (data.field.accountWay == 1) {
                $("#accountWay").text('微信')
            }
            if (data.field.accountWay == 2) {
                $("#accountWay").text('支付宝')
            }
            if (data.field.accountWay == 3) {
                $("#accountWay").text('现金')
            }
            if (data.field.accountType == 1) {
                $("#accountType").text('洗澡卡')
            }
            if (data.field.accountType == 2) {
                $("#accountType").text('水卡')
            }
            if (data.field.remark =='' || data.field.remark.length <=0){
                $("#remark").text('无')
            }else {
                $("#remark").text(data.field.remark)
            }
            axios.post("/account/insertAccount", data.field).then(function (response) {
                if (response.code == 200) {
                    step.next('#stepForm');
                }
            }).catch(function (error) {
                miniAdmin.error(error)
            })
            return false;
        });

        form.on('submit(formStep2)', function (data) {
            step.next('#stepForm');
            return false;
        });

        $('.pre').click(function () {
            step.pre('#stepForm');
        });

        $('.next').click(function () {
            step.next('#stepForm');
        });
    })
</script>
