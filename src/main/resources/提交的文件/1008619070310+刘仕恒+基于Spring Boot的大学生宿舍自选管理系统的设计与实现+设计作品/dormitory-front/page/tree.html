<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="//res.ilayuis.com/layui/dist/css/layui.css"
          tppabs="//res.ilayuis.com/layui/dist/css/layui.css" media="all">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>基本演示</legend>
</fieldset>
<div class="layui-btn-container">
    <button type="button" class="layui-btn layui-btn-sm" lay-demo="getChecked">获取选中节点数据</button>
    <button type="button" class="layui-btn layui-btn-sm" lay-demo="setChecked">勾选指定节点</button>
    <button type="button" class="layui-btn layui-btn-sm" lay-demo="reload">重载实例</button>
</div>

<div id="test12" class="demo-tree-more"></div>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>常规用法</legend>
</fieldset>

<div id="test1" class="demo-tree demo-tree-box"></div>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>无连接线风格</legend>
</fieldset>
<div id="test13" class="demo-tree-more"></div>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>仅节点左侧图标控制收缩</legend>
</fieldset>

<div id="test2" class="demo-tree"></div>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>手风琴模式</legend>
</fieldset>

<div id="test4" class="demo-tree"></div>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>点击节点新窗口跳转</legend>
</fieldset>

<div id="test5" class="demo-tree"></div>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>开启复选框</legend>
</fieldset>

<div id="test7" class="demo-tree"></div>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>开启节点操作图标</legend>
</fieldset>

<div id="test9" class="demo-tree demo-tree-box" style="width: 200px; height: 300px; overflow: scroll;"></div>

<script src="//res.ilayuis.com/layui/dist/layui.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述 JS 路径需要改成你本地的 -->
<script>


    layui.use(['tree', 'util'], function () {
        var tree = layui.tree
            , layer = layui.layer
            , util = layui.util

        //基本演示
        tree.render({
            elem: '#test12'
            , data: data
            , showCheckbox: true  //是否显示复选框
            , id: 'demoId1'
            , isJump: false //是否允许点击节点时弹出新窗口跳转
            // ,click: function(obj){
            //   var data = obj.data;  //获取当前点击的节点数据
            //   layer.msg('状态：'+ obj.state + '<br>节点数据：' + JSON.stringify(data));
            // }
        });

        //按钮事件
        util.event('lay-demo', {
            getChecked: function (othis) {
                var checkedData = tree.getChecked('demoId1'); //获取选中节点的数据

                layer.alert(JSON.stringify(checkedData), {shade: 0});
                console.log(checkedData);
            }
            , setChecked: function () {
                tree.setChecked('demoId1', [12, 16]); //勾选指定节点
            }
            , reload: function () {
                //重载实例
                tree.reload('demoId1', {});

            }
        });

        //常规用法
        tree.render({
            elem: '#test1' //默认是点击节点可进行收缩
            , data: data1
        });

        //无连接线风格
        tree.render({
            elem: '#test13'
            , data: data1
            , showLine: false  //是否开启连接线
        });

        //仅节点左侧图标控制收缩
        tree.render({
            elem: '#test2'
            , data: data1
            , onlyIconControl: true  //是否仅允许节点左侧图标控制展开收缩
            , click: function (obj) {
                layer.msg(JSON.stringify(obj.data));
            }
        });
        //手风琴模式
        tree.render({
            elem: '#test4'
            , data: [{
                title: '优秀'
                , children: [{
                    title: '80 ~ 90'
                }, {
                    title: '90 ~ 100'
                }]
            }, {
                title: '良好'
                , children: [{
                    title: '70 ~ 80'
                }, {
                    title: '60 ~ 70'
                }]
            }, {
                title: '要努力奥'
                , children: [{
                    title: '0 ~ 60'
                }]
            }]
            , accordion: true
        });

        //点击节点新窗口跳转
        tree.render({
            elem: '#test5'
            , data: data
            , isJump: true  //link 为参数匹配
        });

        //开启复选框
        tree.render({
            elem: '#test7'
            , data: data2
            , showCheckbox: true
        });

        //开启节点操作图标
        tree.render({
            elem: '#test9'
            , data: data3
            , edit: ['add', 'update', 'del'] //操作节点的图标
            , operate: function (obj) {
                var type = obj.type; //得到操作类型：add、edit、del
                var data = obj.data; //得到当前节点的数据
                var elem = obj.elem; //得到当前节点元素
                console.log(type)
                console.log(data)

                // //Ajax 操作
                // var id = data.id; //得到节点索引
                // if (type === 'add') { //增加节点
                //     //返回 key 值
                //     return 123;
                // } else if (type === 'update') { //修改节点
                //     console.log(elem.find('.layui-tree-txt').html()); //得到修改后的内容
                // } else if (type === 'del') { //删除节点
                //
                // }
                ;
            }
            , showCheckbox: false
        });

        // function getData4() {
        //     var  data4 = []
        //     axios.get('/org/tree').then(function (res) {
        //         if (res.code == 200) {
        //             data4 = res.data
        //         }
        //     })
        //     return data4;
        // }
    });



    // function getData() {
    //
    //     axios.get("/org/tree").then(function (response) {
    //         if (response.code == 200) {
    //             tree.render({
    //                 elem: '#tree'
    //                 , data: response.data
    //                 , id: 'tree1'
    //                 , showCheckbox: true  //是否显示复选框
    //                 , isJump: false//是否允许点击节点时弹出新窗口跳转
    //                 , edit: ['add', 'update', 'del']
    //                 , operate: function (obj) {
    //                     var type = obj.type; //得到操作类型：add、edit、del
    //                     var data = obj.data; //得到当前节点的数据
    //                     var elem = obj.elem; //得到当前节点元素
    //                     console.log(type)
    //                     console.log(data)
    //
    //                     // //Ajax 操作
    //                     var id = data.id; //得到节点索引
    //                     if (type === 'add') { //增加节点
    //                         //返回 key 值
    //                         let content = miniPage.getHrefContent('org/add.html');
    //                         let openWH = miniPage.getOpenWidthHeight();
    //
    //                         let index = layer.open({
    //                             title: '添加',
    //                             type: 1,
    //                             shade: 0.2,
    //                             maxmin: true,
    //                             shadeClose: true,
    //                             area: [openWH[1] + 'px', openWH[1] + 'px'],
    //                             content: content,
    //                         });
    //                         $(window).on("resize", function () {
    //                             layer.full(index);
    //                         });
    //                     }
    //                     // else if (type === 'update') { //修改节点
    //                     //     console.log(elem.find('.layui-tree-txt').html()); //得到修改后的内容
    //                     // } else if (type === 'del') { //删除节点
    //                     //
    //                     // }
    //                     ;
    //                 }
    //             });
    //         }
    //     })
    //
    // }

    // getData()
</script>

</body>
</html>